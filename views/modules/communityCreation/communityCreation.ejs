<%- include("../../modules/header.ejs", {
    pageTitle: pageTitle,
    pageDescription: "Showcase your content and builds related to the Server on the monthly community creations round up!"
}) %>

<%- include("../../modules/navigationBar.ejs") %>

<%- include("communityCreationsHeroHeader.ejs", {
  backgroundImage: "../images/banner/AronCrystalBuilding.png"
}) %>

<section class="section">
    <div class="container-fluid">

      <div class="container">
        <% if (apiData.success == false) { %>
          <%- include("../../partials/alert.ejs", {
            alertType: "danger",
            content: apiData.message
          }) %>
        <% } %>
      </div>
      
        <div class="row">

          <% if (!apiData.success == false) { %>
            <% apiData.data.forEach(function (creation) { %>
              <div class="col-sm-4" style="padding: 10px; padding-bottom: 5px;">

                <!-- Image Slider -->
                <div id="carousel<%= creation.creationId %>" class="carousel slide" data-interval="false">
                  <div class="carousel-inner">
                    <div class="carousel-item active">
                      <img class="d-block w-100" src="https://media.discordapp.net/attachments/869465358086570054/957871064438939699/2022-03-27_22.16.29.png?width=1178&height=662" alt="First slide">
                    </div>
                    <div class="carousel-item">
                      <img class="d-block w-100" src="https://media.discordapp.net/attachments/869465358086570054/956813983963316224/2022-03-25_00.16.12.png?width=1178&height=662" alt="Second slide">
                    </div>
                    <div class="carousel-item">
                      <img class="d-block w-100" src="https://media.discordapp.net/attachments/869465358086570054/956817472584048660/WoWScrnShot_032522_002904.jpg?width=1178&height=662" alt="Third slide">
                    </div>
                  </div>
                  <a class="carousel-control-prev" href="#carousel<%= creation.creationId %>" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                  </a>
                  <a class="carousel-control-next" href="#carousel<%= creation.creationId %>" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                  </a>
                </div>

                <!-- <img 
                src="https://media.discordapp.net/attachments/869465358086570054/921260594982686720/2021-12-17_14.57.59.png" 
                class="card-img-top"> -->

                <div class="card-body">
                  <h5 class="card-title"><%= creation.creationName %></h5>
                  <p class="card-text"><small><%= creation.creationDescription %></small></p>
                </div>
                <div class="card-footer text-muted">
                  <small>Submitted by <a href="/profile/<%= creation.username %>"><%= creation.username %></a> <%- moment(creation.submittedDate).startOf('day').fromNow(); %></small>
                  <br>

                  <div class="btn-group">
                    <% if (creation.approved === 0) { %>
                      <small><i class="fas fa-info-square" style="color: blue;"></i> This creation won't be public until this creation is Approved.</small>
                      <form action="<%= config.siteConfiguration.siteAddress %><%= config.siteConfiguration.apiRoute %>/communitycreation/approve" method="post">
                        <input type="hidden" name="creationId" value="<%= creation.creationId %>">
                        <button type="submit" class="btn btn-sm btn-outline-success"><i class="far fa-thumbs-up"></i> Approve</button>
                      </form>
  
                      <form action="<%= config.siteConfiguration.siteAddress %><%= config.siteConfiguration.apiRoute %>/communitycreation/delete" method="post">
                        <input type="hidden" name="creationId" value="<%= creation.creationId %>">
                        <button type="submit" class="btn btn-sm btn-outline-danger"><i class="far fa-thumbs-up"></i> Deny</button>
                      </form>
                    <% } else { %>
                      <form action="<%= config.siteConfiguration.siteAddress %><%= config.siteConfiguration.apiRoute %>/communitycreation/like" method="post">
                        <input type="hidden" name="creationId" value="<%= creation.creationId %>">
                        <button type="submit" class="btn btn-sm btn-outline-primary"><i class="far fa-thumbs-up"></i> Like (???)</button>
                      </form>
                    <% } %>
                  </div>
                </div>
              </div>
            <% }) %>
          <% } %>

        </div>
    </div>
</section>

<%- include("../../modules/footer.ejs") %>  